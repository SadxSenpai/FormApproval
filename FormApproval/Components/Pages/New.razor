@page "/new/{TemplateId:guid}"
@rendermode InteractiveServer
@* 
    Page to create a new request for the selected template.
    Supports:
      - PTO: German form as provided by the user.
      - Overtime/Early leave: timeline UI with start/end time and total.
*@
@using FormApproval.Components.Forms
@inject FormApproval.Services.IFormRepository Repo

<h3>@(templateName ?? "New Request")</h3>

@if (isOvertime)
{
    <OvertimeForm TemplateId="@TemplateId" />
}
else
{
    <PtoForm TemplateId="@TemplateId" />
}

@code {
    [Parameter] public Guid TemplateId { get; set; }

    private string? templateName;
    private bool isOvertime;

    protected override void OnParametersSet()
    {
        templateName = Repo.GetTemplate(TemplateId)?.Name ?? "New Request";
        isOvertime = templateName.Contains("overtime", StringComparison.OrdinalIgnoreCase);
    }
}